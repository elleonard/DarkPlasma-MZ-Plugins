# CONTRIBUTING

このリポジトリでは Issue や Pull Request を歓迎しています。  
下記の簡単なルールをお読みの上、積極的にコミットしてください。

# Pull Request Process

1. Pull Request が出されたら、メンテナ（elleonard, DarkPlasma）が内容と動作を確認します。
2. 内容に問題がある場合、メンテナが修正すべき点を Pull Request にコメントします。
3. 問題点の指摘から 7 日以内に反応がない場合、 Pull Request は放棄されたものとみなし、 Close します。
4. Pull Request はメンテナの承認により、即座にマージされます。

# 規則

## コーディング規約

基本的に、元あるファイルと同じになるようにしてください。  
フォーマットについては、 pre-commit 時に自動でかけてくれるため、意識しなくても構いません。
コーディング中気になるようであれば、 `yarn format` すると良いでしょう。

## バージョニング

各プラグイン用の config.yml にてバージョンの変遷を記録しています。  
バージョン管理スキームはセマンティックバージョニングに従っています。

### メジャーバージョンアップ

基本的に行わないようにしてください。行う場合、メンテナと十分に相談する必要があります。  
メジャーバージョンを上げるような更新とは、以下のようなものを指します。

- プラグインやプラグインコマンドのパラメータに破壊的な変更がある
- ヘルプに記載されたインターフェースに破壊的な変更がある
- 前のバージョンのセーブデータを利用できなくなる変更がある

破壊的な変更とは、パラメータの型が変わったり、パラメータの数が減ったり、インターフェースの名前が変わったりして、以前のバージョンに上書きした際に正常に動作しなくなる恐れのある変更（後方互換性のない変更）のことを言います。

### マイナーバージョンアップ

後方互換性を保った機能追加をする場合に行ってください。

### パッチバージョンアップ

不具合修正やリファクタをする場合に行ってください。

### バージョンをあげない更新

基本的に、更新がある場合は必ずバージョンをあげてください。
ただし、更新履歴の誤字脱字修正など、動作や利用者がとるべき行動に影響のないコメント上の修正のみ、バージョンをあげずに更新しても構いません。

## コードレビューについて

下記の点を特に注意して見ます。

### 変更点の説明が明らかであること

Pull Request をレビューする際、コードの前にタイトルや説明文、コミットメッセージをまず読みます。  
それらのテキストで、経緯や変更点を明確に説明するようにしてください。

良い例: ショップを開いた時に TypeError で落ちるバグの修正

悪い例: ショップのバグ修正

コミットメッセージは、下記の形式で書いてください。

x.y.z ショップを開いた時に TypeError で落ちるバグの修正

x.y.z はバージョンです。

### フォーマットの崩れがないこと

フォーマット機能を持つエディタを使用してください。  
Windows 版の Visual Studio Code であれば、 Shift + Alt + F で自動フォーマットがかかります。  
また、 Format On Save 設定を ON にすることで、保存時に自動でフォーマットをかけてくれます。

### 命名規則に従っていること

基本的に、RPG ツクール MZ コアスクリプトの命名規則に従ってください。  
一時的なシンボルであっても、間違っても `temp` や `hoge` などという意味のない名前をつけないようにしてください。  
意味のない値にシンボルをあてがう必要のあるコードは、大抵の場合どこかが歪です。

また、クラスは UpperCamelCase、変数やメソッドは lowerCamelCase、恒常的に用いる定数は SNAKE_CASE で命名してください。  
プライベートである旨を表すためには、変数やメソッド名の先頭にアンダーバーを付与してください。

### プラグインの責務を逸脱していないこと

プラグインにはそれぞれ責務の範囲があります。  
機能を追加する場合、その範囲を逸脱しないように注意してください。  
名前ウィンドウを表示するプラグインに対して立ち絵表示の機能を追加したい、という内容の Pull Request を受けても、それは到底承認できません。

責務の範囲内の追加であるかどうか不安な場合、Issue でご相談いただいても構いません。

### クラスやメソッドの責務を逸脱していないこと

コード中のクラスやメソッドにもそれぞれ責務があります。  
例えば、Window クラスからゲームデータを操作すべきではありません。  
Window クラスは Scene クラスによって生成・管理されるべきです。

本来の責務から逸脱したコードを通そうとする場合、必ずその理由を明確に説明できるようにしてください。

## MV プラグインの移植について

メンテナだけでは手が回らないため、移植の PR を歓迎します。

本リポジトリでは、両用プラグインを許容しません。  
成果物ビルド時に自動的に `@target MZ` を付与します。

バージョンは MV 版を引き継がず、1.0.0 から開始してください。

基本的に、旧形式のプラグインコマンドは捨て、新形式に作り変えてください。  
旧形式を移植する場合も、必ずヘルプに非推奨である旨を明記してください。

## メンテナから反応がない場合

できるだけ早く反応したいと考えていますが、時期によってはすぐに反応できないこともあります。
反応がない場合、下記 Twitter アカウントまでご連絡ください。

- [@plasma_dark](https://twitter.com/plasma_dark)（18 歳以上）
- [@elleonard_f](https://twitter.com/elleonard_f)（18 歳未満）
