---
title: 足跡画像を表示し、足音SEを再生する
category:
  - プラグイン解説
date: 2024-03-28 11:45:38
tags:
  - マップ
---

# 概要

タイルセットの設定に応じて、キャラクターが歩行した際に足跡画像を表示したり、足音SEを再生します。

# 使用例

![使用例](step-image-and-sound.png "使用例")

タイルセットのメモ欄に、地形タグごとの設定を記述します。
メモ欄の設定はMV向けプラグイン[StepEffect.js](https://plugin.fungamemake.com/archives/2059)と互換性があります。

## 設定例

```
<ステップエフェクト1:Footprint>
<ステップエフェクト設定1:0,12,fitAngle,fitStep,wet5,animeSpeed16>
<ステップサウンド1:sand>
<ステップサウンド設定1:30-50,130>
```

地形タグ1に関する足跡及び足音の設定です。
img/system/Footprint.png を足跡画像として使用します。

足跡の表示位置をX座標0, Y座標12だけ補正します。
キャラクターの向きに応じて足跡画像を回転します。(fitAngle)
一歩歩くごとに足跡画像の表示位置をキャラクターの左右にブレさせます。(fitStep)
5番として湿っています。(wet5)
アニメーションの速度が16です。(animeSpeed16)
fitAngle, fiteStep, wetN, dry, animeSpeedN は任意設定項目です。

audio/se/sand.ogg を足音SEとして使用します。
ボリュームを30～50として再生します。
ピッチを130として再生します。

# 湿った地形について

5番として湿った地形にキャラクターが踏み入れると、そのキャラクターの足の裏に5番の湿りが付着します。
その状態で、dry設定のある地形に踏み入れると、地形タグ5の地形に踏み入れたものとして足跡画像の表示と足音SEの再生を行います。

付着した湿りは違う番号の湿りで上書きされるか、湿っていない地形を一定歩数歩くことで除去されます。

# セーブデータの拡張について

本プラグインはセーブデータに以下の情報を追加します。

- キャラクターの足の裏に付着した湿り番号 (数値型)
- キャラクターの足の裏が湿った状態での足跡描画用歩数カウント (数値型)
- キャラクターの足跡描画用歩数カウント (数値型)
- キャラクターの足跡描画用移動カウント (数値型)

# ダウンロードページへのリンク

[GitHub](https://github.com/elleonard/DarkPlasma-MZ-Plugins/blob/release/DarkPlasma_StepImageAndSound.js)
ダウンロード方法については {% post_link about %} を参照してください。
